{% load staticfiles %}

<!DOCTYPE HTML>
<html>

<head>  

<script type="text/javascript" src="{% static 'canvas/canvasjs.min.js'%}"></script>
 <link rel="stylesheet" href="{% static 'css/style.css' %}">
 <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
 <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
 <link rel="stylesheet" href="{% static 'css/freelancer.css' %}">

  <script type="text/javascript">

  window.onload = function () {

    var movie_animation =[];
    var movie_action =[];
    var movie_sci_fi =[];
    var movie_fantacy =[];

    {% for request in movie_animation %}
        movie_animation.push({x: {{request.year.year}}, y: {{request.grossing}}, z:{{request.budget}},indexLabel: '{{ request.name }}', name: '{{ request.name }}'});
    {% endfor %}

    {% for request in movie_action %}
        movie_action.push({x: {{request.year.year}}, y: {{request.grossing}}, z:{{request.budget}}, indexLabel: '{{ request.name }}',name: '{{ request.name }}'});
    {% endfor %}

    {% for request in movie_fantacy %}
        movie_fantacy.push({x: {{request.year.year}}, y: {{request.grossing}}, z:{{request.budget}}, indexLabel: '{{ request.name }}',name: '{{ request.name }}'});
    {% endfor %}

    {% for request in movie_sci_fi %}
        movie_sci_fi.push({x: {{request.year.year}}, y: {{request.grossing}}, z:{{request.budget}}, indexLabel: '{{ request.name }}', name: '{{ request.name }}'});
    {% endfor %}

    var chart = new CanvasJS.Chart("chartContainer",
    {
      zoomEnabled: true,
      animationEnabled: true,
      title:{
        text: "All Genres"
      },
      axisX: {
        title:"Year",
        interval: 1,
        valueFormatString:"#",
        gridThickness: 1,
	    tickThickness: 1,
        gridColor: "lightgrey",
        tickColor: "lightgrey",
        lineThickness: 5
      },
      axisY:{
        title: "Grossing ($mln)",
        gridThickness: 1,
	    tickThickness: 1,
        gridColor: "lightgrey",
        tickColor: "lightgrey",
        lineThickness: 5,
        maximum: 2200,
        minimum: 500,
        interval: 200,
        
      },

      data: [
      {        
        type: "bubble",     
        toolTipContent: "<span style='\"'color: {color};'\"'></span> <strong>Movie</strong> {name} <br/><strong>Genre</strong> Action <br/><strong>Year</strong> {x} <br/> <strong>Grossing (mln) </strong> {y}<br/> <strong>Budget (mln)</strong> ${z}",
        indexLabelPlacement: "outside",
        indexLabelOrientation: "horizontal",
        indexLabelFontSize: 12,
        indexLabelFontColor: "#585858",
        color: "#585858",
        dataPoints:movie_action
      },
      {
        type: "bubble",
        toolTipContent: "<span style='\"'color: {color};'\"'></span> <strong>Movie</strong> {name} <br/><strong>Genre</strong> Animation <br/><strong>Year</strong> {x} <br/> <strong>Grossing (mln) </strong> {y}<br/> <strong>Budget (mln)</strong> ${z}",
        indexLabelPlacement: "outside",
        indexLabelOrientation: "horizontal",
        indexLabelFontSize: 12,
        indexLabelFontColor: "#118C4E",
        color: "#118C4E",
        dataPoints:movie_animation
      },
      {
        type: "bubble",
        indexLabelPlacement: "outside",
        indexLabelOrientation: "horizontal",
        indexLabelFontSize: 12,
        indexLabelFontColor: "#C1E1A6",
        toolTipContent: "<span style='\"'color: {color};'\"'></span> <strong>Movie</strong> {name} <br/><strong>Genre</strong> Fantacy <br/><strong>Year</strong> {x} <br/> <strong>Grossing (mln) </strong> {y}<br/> <strong>Budget (mln)</strong> ${z}",
        color: "#C1E1A6",
        dataPoints:movie_fantacy
      },
      {
        type: "bubble",
        toolTipContent: "<span style='\"'color: {color};'\"'></span> <strong>Movie</strong> {name} <br/><strong>Genre</strong> Sci-Fi <br/><strong>Year</strong> {x} <br/> <strong>Grossing (mln) </strong> {y}<br/> <strong>Budget (mln)</strong> ${z}",
        indexLabelPlacement: "outside",
        indexLabelOrientation: "horizontal",
        indexLabelFontSize: 12,
        color: "#FF9009",
        indexLabelFontColor: "#FF9009",
        dataPoints:movie_sci_fi
      }

{#      {#}
{#        type: "bubble",#}
{#        toolTipContent: "<span style='\"'color: {color};'\"'></span> <strong>Movie</strong> {name} <br/><strong>Genre</strong> {indexLabel} <br/><strong>Year</strong> {x} <br/> <strong>Grossing (mln) </strong> {y}<br/> <strong>Budget (mln)</strong> ${z}",#}
{#        dataPoints: movie_1#}
{#      }#}
      ]

    });

chart.render();
}
</script>

 <link rel="stylesheet" href="{% static 'css/style.css' %}">

</head>
<body>

 {% include 'templates/navbar.html'  %}

  <div id="chartContainer" style="height: 500px; width: 100%;">
  </div>

 <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-12">
                        <h3>Processing Project</h3>
                        <p> The chart shows the movies with the highest grossings. The bubble size shows the budget of a movie.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; Galina 2016
                    </div>
                </div>
            </div>
        </div>
    </footer>

</body>

</html>
